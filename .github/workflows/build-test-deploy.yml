name: CI/CD

on:
  push:
  pull_request:

concurrency:
  group: "pages"
  cancel-in-progress: true

jobs:
  build:
    name: Build ⚒️
    uses: ./.github/workflows/build.yml

  test:
    name: Test 🧪
    needs: [build]
    # strategy:
    #   matrix:
    #     os: [ubuntu-latest, windows-latest, macos-latest]
    uses: ./.github/workflows/build.yml

  # deploy:
  #   if: github.ref == 'refs/heads/main'
  #   needs: [build, test]
  #   permissions:
  #     contents: read
  #     pages: write
  #     id-token: write
  #   name: Deploy 🚀
  #   runs-on: ubuntu-latest
  #   environment:
  #     name: github-pages
  #     url: ${{ steps.deployment.outputs.page_url }}
  #   steps:
  #     - uses: actions/download-artifact@v3
  #       with:
  #         name: dist
  #         path: ${{ env.dist }}
  #     - uses: actions/configure-pages@v1
  #       if: github.ref == 'refs/heads/main'
  #     - uses: actions/upload-pages-artifact@v1
  #       with:
  #         path: ${{ env.dist }}
  #     - uses: actions/deploy-pages@v1
  #       id: deployment
  #       if: github.ref == 'refs/heads/main'

  # release:
  #   permissions:
  #     contents: write
  #   if: startsWith(github.ref, 'refs/tags/')
  #   needs: [build, test]
  #   name: Release 🚢
  #   runs-on: ubuntu-latest
  #   steps:
  #   - uses: actions/download-artifact@v3
  #     with:
  #       name: dist
  #       path: ${{ env.dist }}
  #   - uses: softprops/action-gh-release@v1
  #     with:
  #       files: ${{ env.dist }}

